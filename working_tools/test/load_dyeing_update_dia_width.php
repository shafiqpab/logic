<?
header('Content-type:text/html; charset=utf-8');
session_start();
include('../../includes/common.php');

$con=connect();
if ($db_type == 0) {
			mysql_query("BEGIN");
		}
		
  $batchArr=array
 (
   
    'BK21-568-21' => 'BK21-568-21',
    'BK21-568-39' => 'BK21-568-39',
    'BK21-739-05' => 'BK21-739-05',
    'BK21-741-06' => 'BK21-741-06',
    'BK21-654-13' => 'BK21-654-13',
    'BK21-741-04' => 'BK21-741-04',
    'BK21-688-01' => 'BK21-688-01',
    'BK21-680-01' => 'BK21-680-01',
    'BK21-786-01' => 'BK21-786-01',
    'BK21-678-16' => 'BK21-678-16',
    'BK21-741-07' => 'BK21-741-07',
    'BK21-741-05' => 'BK21-741-05',
    'BK21-734-81' => 'BK21-734-81',
    'BK21-568-25' => 'BK21-568-25',
    'BK21-678-20' => 'BK21-678-20',
    'BK21-735-02' => 'BK21-735-02',
    'BK21-734-108' => 'BK21-734-108',
    'BK21-606-01' => 'BK21-606-01',
    'BK21-568-26' => 'BK21-568-26',
    'BK21-682-01' => 'BK21-682-01',
    'BK21-734-51' => 'BK21-734-51',
    'BK21-568-23' => 'BK21-568-23',
    'BK21-686-01' => 'BK21-686-01',
    'BK21-568-30' => 'BK21-568-30',
    'BK21-662-07' => 'BK21-662-07',
    'BK21-654-20' => 'BK21-654-20',
    'BK21-662-06' => 'BK21-662-06',
    'BK21-654-26' => 'BK21-654-26',
    'BK21-739-01' => 'BK21-739-01',
    'BK21-654-19' => 'BK21-654-19',
    'BK21-741-11' => 'BK21-741-11',
    'BK21-734-103' => 'BK21-734-103',
    'BK21-734-107' => 'BK21-734-107',
    'BK21-741-10' => 'BK21-741-10',
    'BK21-735-01' => 'BK21-735-01',
    'BK21-635-05' => 'BK21-635-05',
    'BK21-635-04' => 'BK21-635-04',
    'BK21-635-06' => 'BK21-635-06',
    'BK21-734-52' => 'BK21-734-52',
    'BK21-568-44' => 'BK21-568-44',
    'BK21-739-08' => 'BK21-739-08',
    'BK21-665-07' => 'BK21-665-07',
    'BK21-734-124' => 'BK21-734-124',
    'BK21-665-06' => 'BK21-665-06',
    'BK21-635-03' => 'BK21-635-03',
    'BK21-635-02' => 'BK21-635-02',
    'BK21-662-05' => 'BK21-662-05',
    'BK21-734-50' => 'BK21-734-50',
    'BK21-686-02' => 'BK21-686-02',
    'BK21-734-04' => 'BK21-734-04',
    'BK21-734-125' => 'BK21-734-125',
    'BK21-734-29' => 'BK21-734-29',
    'BK21-734-49' => 'BK21-734-49',
    'BK21-734-19' => 'BK21-734-19',
    'BK21-734-20' => 'BK21-734-20',
    'BK21-734-18' => 'BK21-734-18',
    'BK21-734-121' => 'BK21-734-121',
    'BK21-734-123' => 'BK21-734-123',
    'BK21-734-26' => 'BK21-734-26',
    'BK21-665-05' => 'BK21-665-05',
    'BK21-665-03' => 'BK21-665-03',
    'BK21-734-104' => 'BK21-734-104',
    'BK21-734-102' => 'BK21-734-102',
    'BK21-741-03' => 'BK21-741-03',
    'BK21-622-06' => 'BK21-622-06',
    'BK21-662-04' => 'BK21-662-04',
    'BK21-709-01' => 'BK21-709-01',
    'BK21-662-03' => 'BK21-662-03',
    'BK21-741-09' => 'BK21-741-09',
    'BK21-665-04' => 'BK21-665-04',
    'BK21-707-02' => 'BK21-707-02',
    'BK21-740-07' => 'BK21-740-07',
    'BK21-622-08' => 'BK21-622-08',
    'BK21-665-02' => 'BK21-665-02',
    'BK21-606-15' => 'BK21-606-15',
    'BK21-654-28' => 'BK21-654-28',
    'BK21-622-01' => 'BK21-622-01',
    'BK21-734-17' => 'BK21-734-17',
    'BK21-734-46' => 'BK21-734-46',
    'BK21-734-15' => 'BK21-734-15',
    'BK21-734-45' => 'BK21-734-45',
    'BK21-734-16' => 'BK21-734-16',
    'BK21-734-44' => 'BK21-734-44',
    'BK21-734-14' => 'BK21-734-14',
    'BK21-734-31' => 'BK21-734-31',
    'BK21-734-42' => 'BK21-734-42',
    'BK21-734-41' => 'BK21-734-41',
    'BK21-606-11' => 'BK21-606-11',
    'BK21-606-06' => 'BK21-606-06',
    'BK21-734-12' => 'BK21-734-12',
    'BK21-734-43' => 'BK21-734-43',
    'BK21-734-87' => 'BK21-734-87',
    'BK21-734-13' => 'BK21-734-13',
    'BK21-648-01' => 'BK21-648-01',
    'BK21-734-80' => 'BK21-734-80',
    'BK21-734-23' => 'BK21-734-23',
    'BK21-568-31' => 'BK21-568-31',
    'BK21-734-22' => 'BK21-734-22',
    'BK21-734-83' => 'BK21-734-83',
    'BK21-734-82' => 'BK21-734-82',
    'BK21-734-85' => 'BK21-734-85',
    'BK21-734-84' => 'BK21-734-84',
    'BK21-734-86' => 'BK21-734-86',
    'BK21-734-02' => 'BK21-734-02',
    'BK21-679-01' => 'BK21-679-01',
    'BK21-681-01' => 'BK21-681-01',
    'BK21-740-06' => 'BK21-740-06',
    'BK21-740-01' => 'BK21-740-01',
    'BK21-740-09' => 'BK21-740-09',
    'BK21-696-13' => 'BK21-696-13',
    'BK21-739-06' => 'BK21-739-06',
    'BK21-739-07' => 'BK21-739-07',
    'BK21-734-116' => 'BK21-734-116',
    'BK21-696-12' => 'BK21-696-12',
    'BK21-732-03' => 'BK21-732-03',
    'BK21-635-01' => 'BK21-635-01',
    'BK21-654-11' => 'BK21-654-11',
    'BK21-734-117' => 'BK21-734-117',
    'BK21-732-01' => 'BK21-732-01',
    'BK21-734-115' => 'BK21-734-115',
    'BK21-740-10' => 'BK21-740-10',
    'BK21-734-114' => 'BK21-734-114',
    'BK21-734-79' => 'BK21-734-79',
    'BK21-734-40' => 'BK21-734-40',
    'BK21-740-08' => 'BK21-740-08',
    'BK21-654-18' => 'BK21-654-18',
    'BK21-695-01' => 'BK21-695-01',
    'BK21-695-02' => 'BK21-695-02',
    'BK21-654-16' => 'BK21-654-16',
    'BK21-568-02' => 'BK21-568-02',
    'BK21-568-19' => 'BK21-568-19',
    'BK21-654-15' => 'BK21-654-15',
    'BK21-654-09' => 'BK21-654-09',
    'BK21-654-27' => 'BK21-654-27',
    'BK21-732-02' => 'BK21-732-02',
    'BK21-667-09' => 'BK21-667-09',
    'BK21-667-08' => 'BK21-667-08',
    'BK21-568-42' => 'BK21-568-42',
    'BK21-597-04' => 'BK21-597-04',
    'BK21-734-113' => 'BK21-734-113',
    'BK21-654-25' => 'BK21-654-25',
    'BK21-654-21' => 'BK21-654-21',
    'BK21-654-23' => 'BK21-654-23',
    'BK21-568-18' => 'BK21-568-18',
    'BK21-654-24' => 'BK21-654-24',
    'BK21-654-22' => 'BK21-654-22',
    'BK21-568-14' => 'BK21-568-14',
    'BK21-568-15' => 'BK21-568-15',
    'BK21-568-03' => 'BK21-568-03',
    'BK21-668-05' => 'BK21-668-05',
    'BK21-665-01' => 'BK21-665-01',
    'BK21-734-77' => 'BK21-734-77',
    'BK21-741-02' => 'BK21-741-02',
    'BK21-741-01' => 'BK21-741-01',
    'BK21-734-78' => 'BK21-734-78',
    'BK21-568-29' => 'BK21-568-29',
    'BK21-696-11' => 'BK21-696-11',
    'BK21-608-03' => 'BK21-608-03',
    'BK21-568-27' => 'BK21-568-27',
    'BK21-734-76' => 'BK21-734-76',
    'BK21-568-28' => 'BK21-568-28',
    'BK21-734-74' => 'BK21-734-74',
    'BK21-668-02' => 'BK21-668-02',
    'BK21-568-48' => 'BK21-568-48',
    'BK21-734-65' => 'BK21-734-65',
    'BK21-696-10' => 'BK21-696-10',
    'BK21-734-73' => 'BK21-734-73',
    'BK21-734-72' => 'BK21-734-72',
    'BK21-568-38' => 'BK21-568-38',
    'BK21-654-10' => 'BK21-654-10',
    'BK21-668-03' => 'BK21-668-03',
    'BK21-667-03' => 'BK21-667-03',
    'BK21-654-14' => 'BK21-654-14',
    'BK21-696-09' => 'BK21-696-09',
    'BK21-654-17' => 'BK21-654-17',
    'BK656-18B-58DIA-9795' => 'BK656-18B-58DIA-9795',
    'BK656-10B-56DIA-4576' => 'BK656-10B-56DIA-4576',
    'BK656-37B-50DIA-16726' => 'BK656-37B-50DIA-16726',
    'BK656-23B-48DIA-11226' => 'BK656-23B-48DIA-11226',
    'BK21-615-02' => 'BK21-615-02',
    'BK21-615-01' => 'BK21-615-01',
    'BK21-597-02' => 'BK21-597-02',
    'BK21-696-08' => 'BK21-696-08',
    'BK21-706-01' => 'BK21-706-01',
    'BK21-568-47' => 'BK21-568-47',
    'BK21-600-02' => 'BK21-600-02',
    'BK21-600-04' => 'BK21-600-04',
    'BK21-667-11' => 'BK21-667-11',
    'BK21-569-06' => 'BK21-569-06',
    'BK21-569-20' => 'BK21-569-20',
    'BK21-569-18' => 'BK21-569-18',
    'BK21-569-22' => 'BK21-569-22',
    'BK21-570-01' => 'BK21-570-01',
    'BK21-573-09' => 'BK21-573-09',
    'BK21-573-08' => 'BK21-573-08',
    'BK21-573-10' => 'BK21-573-10',
    'BK21-593-04' => 'BK21-593-04',
    'BK21-579-02' => 'BK21-579-02',
    'BK21-608-54' => 'BK21-608-54',
    'BK21-608-01' => 'BK21-608-01',
    'BK21-696-07' => 'BK21-696-07',
    'BK21-667-06' => 'BK21-667-06',
    'BK21-608-39' => 'BK21-608-39',
    'BK21-604-01' => 'BK21-604-01',
    'BK21-614-02' => 'BK21-614-02',
    'BK21-667-07' => 'BK21-667-07',
    'BK21-667-02' => 'BK21-667-02',
    'BK21-667-01' => 'BK21-667-01',
    'BK21-696-06' => 'BK21-696-06',
    'BK21-667-10' => 'BK21-667-10',
    'BK21-600-03' => 'BK21-600-03',
    'BK21-668-07' => 'BK21-668-07',
    'BK21-668-06' => 'BK21-668-06',
    'BK21-696-15' => 'BK21-696-15',
    'BK21-696-04' => 'BK21-696-04',
    'BK21-696-02' => 'BK21-696-02',
    'BK21-608-61' => 'BK21-608-61',
    'BK21-668-01' => 'BK21-668-01',
    'BK21-600-01' => 'BK21-600-01',
    'BK21-624-04' => 'BK21-624-04',
    'BK21-668-04' => 'BK21-668-04',
    'BK21-608-55' => 'BK21-608-55',
    'BK21-626-01' => 'BK21-626-01',
    'BK21-667-05' => 'BK21-667-05',
    'BK21-568-17' => 'BK21-568-17',
    'BK21-608-49' => 'BK21-608-49',
    'BK21-608-48' => 'BK21-608-48',
    'BK21-597-03' => 'BK21-597-03',
    'BK21-608-60' => 'BK21-608-60',
    'BK21-614-01' => 'BK21-614-01',
    'BK21-608-50' => 'BK21-608-50',
    'BK21-667-04' => 'BK21-667-04',
    'BK21-624-03' => 'BK21-624-03',
    'BK21-624-02' => 'BK21-624-02',
    'BK21-624-01' => 'BK21-624-01',
    'BK21-608-22' => 'BK21-608-22',
    'BK21-608-52' => 'BK21-608-52',
    'BK21-604-02' => 'BK21-604-02',
    'BK21-593-03' => 'BK21-593-03',
    'BK21-597-01' => 'BK21-597-01',
    'BK21-689-01' => 'BK21-689-01',
    'BK21-580-02' => 'BK21-580-02',
    'BK21-596-03' => 'BK21-596-03',
    'BK21-613-01' => 'BK21-613-01',
    'BK21-601-10' => 'BK21-601-10',
    'BK21-601-09' => 'BK21-601-09',
    'BK21-601-08' => 'BK21-601-08',
    'BK21-601-07' => 'BK21-601-07',
    'BK21-601-06' => 'BK21-601-06',
    'BK21-601-05' => 'BK21-601-05',
    'BK21-601-04' => 'BK21-601-04',
    'BK21-601-03' => 'BK21-601-03',
    'BK21-601-02' => 'BK21-601-02',
    'BK21-579-01' => 'BK21-579-01',
    'BK21-555-01' => 'BK21-555-01',
    'BK21-594-02' => 'BK21-594-02',
    'BK21-674-01' => 'BK21-674-01',
    'BK21-608-57' => 'BK21-608-57',
    'BK21-602-01' => 'BK21-602-01',
    'BK21-627-02' => 'BK21-627-02',
    'BK21-608-34' => 'BK21-608-34',
    'BK21-594-01' => 'BK21-594-01',
    'BK21-568-46' => 'BK21-568-46',
    'BK21-568-20' => 'BK21-568-20',
    'BK21-568-22' => 'BK21-568-22',
    'BK21-581-01' => 'BK21-581-01',
    'BK21-580-04' => 'BK21-580-04',
    'BK21-580-03' => 'BK21-580-03',
    'BK21-603-06' => 'BK21-603-06',
    'BK21-603-05' => 'BK21-603-05',
    'BK21-603-02' => 'BK21-603-02',
    'BK21-603-01' => 'BK21-603-01',
    'BK21-603-11' => 'BK21-603-11',
    'BK21-601-13' => 'BK21-601-13',
    'BK21-601-12' => 'BK21-601-12',
    'BK21-601-11' => 'BK21-601-11',
    'BK21-568-06' => 'BK21-568-06',
    'BK21-573-13' => 'BK21-573-13',
    'BK21-568-07' => 'BK21-568-07',
    'BK21-568-04' => 'BK21-568-04',
    'BK21-568-05' => 'BK21-568-05',
    'BK21-613-02' => 'BK21-613-02',
    'BK21-567-09' => 'BK21-567-09',
    'BK21-567-08' => 'BK21-567-08',
    'BK21-567-07' => 'BK21-567-07',
    'BK21-573-04' => 'BK21-573-04',
    'BK21-568-24' => 'BK21-568-24',
    'BK21-608-32' => 'BK21-608-32',
    'BK21-610-01' => 'BK21-610-01',
    'BK21-593-01' => 'BK21-593-01',
    'BK21-650-04' => 'BK21-650-04',
    'BK21-603-12' => 'BK21-603-12',
    'BK21-573-14' => 'BK21-573-14',
    'BK21-573-12' => 'BK21-573-12',
    'BK21-573-11' => 'BK21-573-11',
    'BK21-653-01' => 'BK21-653-01',
    'BK21-608-29' => 'BK21-608-29',
    'BK21-627-01' => 'BK21-627-01',
    'BK21-599-01' => 'BK21-599-01',
    'BK21-608-17' => 'BK21-608-17',
    'BK21-608-16' => 'BK21-608-16',
    'BK21-660-02' => 'BK21-660-02',
    'BK21-553-02' => 'BK21-553-02',
    'BK21-603-09' => 'BK21-603-09',
    'BK21-601-14' => 'BK21-601-14',
    'BK21-568-11' => 'BK21-568-11',
    'BK21-608-15' => 'BK21-608-15',
    'BK21-568-37' => 'BK21-568-37',
    'BK21-568-41' => 'BK21-568-41',
    'BK21-553-03' => 'BK21-553-03',
    'BK21-573-05' => 'BK21-573-05',
    'BK21-568-12' => 'BK21-568-12',
    'BK21-608-08' => 'BK21-608-08',
    'BK21-554-04' => 'BK21-554-04',
    'BK21-608-12' => 'BK21-608-12',
    'BK21-554-01' => 'BK21-554-01',
    'BK21-568-08' => 'BK21-568-08',
    'BK21-567-02' => 'BK21-567-02',
    'BK21-567-01' => 'BK21-567-01',
    'BK21-567-04' => 'BK21-567-04',
    'BK21-567-03' => 'BK21-567-03',
    'BK21-573-03' => 'BK21-573-03',
    'BK21-573-06' => 'BK21-573-06',
    'BK21-573-02' => 'BK21-573-02',
    'BK21-568-10' => 'BK21-568-10',
    'BK21-601-17' => 'BK21-601-17',
    'BK21-580-01' => 'BK21-580-01',
    'BK21-568-40' => 'BK21-568-40',
    'BK21-568-09' => 'BK21-568-09',
    'BK21-598-01' => 'BK21-598-01',
    'BK21-601-16' => 'BK21-601-16',
    'BK21-601-15' => 'BK21-601-15',
    'BK21-603-10' => 'BK21-603-10',
    'BK21-650-01' => 'BK21-650-01',
    'BK21-650-03' => 'BK21-650-03',
    'BK21-603-08' => 'BK21-603-08',
    'BK21-603-07' => 'BK21-603-07',
    'BK21-603-04' => 'BK21-603-04',
    'BK21-603-03' => 'BK21-603-03',
    'BK21-556-01' => 'BK21-556-01',
    'BK21-601-01' => 'BK21-601-01',
    'BK21-553-01' => 'BK21-553-01',
    'BK21-582-01' => 'BK21-582-01',
    'BK21-568-01' => 'BK21-568-01',
    'BK21-554-03' => 'BK21-554-03',
    'BK21-555-02' => 'BK21-555-02',
    'BK21-554-02' => 'BK21-554-02',
    'BK21-596-01' => 'BK21-596-01',
    'BK21-567-06' => 'BK21-567-06',
    'BK21-596-02' => 'BK21-596-02',
    'BK21-567-05' => 'BK21-567-05',
    'BK21-569-05' => 'BK21-569-05',
    'BK21-569-03' => 'BK21-569-03',
    'BK21-569-02' => 'BK21-569-02',
    'BK21-569-07' => 'BK21-569-07',
    'BK21-569-01' => 'BK21-569-01',
    'Test28Yarn' => 'Test28Yarn',
    'Test28' => 'Test28',
    'TEST27' => 'TEST27'
);
foreach($batchArr as $b_no)
{
	$batchArr_chk[$b_no]=$b_no;
}
//echo "Tot Batch=".count($batchArr_chk);die;
	die; 
$load_dyeing_compamy_array=array();
 $load_main_dyeing_sql="select c.id as dtls_id,c.prod_id,b.batch_id,b.batch_no,b.load_unload_id,a.company_id,c.dia_width as dyeing_dia_width,d.dia_width from pro_fab_subprocess b,pro_fab_subprocess_dtls c, pro_batch_create_mst a,product_details_master d where a.id=b.batch_id and b.id=c.mst_id and d.id=c.prod_id and d.item_category_id=13 and b.entry_form=35  and b.load_unload_id=2 and c.status_active=1  and c.dia_width='Open Width'  and b.process_end_date between '01-Jan-2021' and '19-Sep-2021' "; 
$load_main_dyeing=sql_select($load_main_dyeing_sql);
foreach($load_main_dyeing as $row)
{
	
	$load_dia_width_array[$row[csf("dtls_id")]]=$row[csf("dia_width")];
	$load_batch_array[$row[csf("batch_id")]]=$row[csf("batch_id")];
}
//print_r($load_dia_width_array);
//echo count($load_batch_array);die;
//die;
 $m=0;
foreach($load_dia_width_array as  $dtls_id=>$dia_width)
{
	$m++;
//$up_mst=execute_query("UPDATE pro_fab_subprocess_dtls set dia_width='$dia_width' where   load_unload_id=2 and id=$dtls_id and status_active=1 ");
 
}


 	if($db_type==0)
		{
			if($up_mst){
			mysql_query("COMMIT");  
				echo "<b>Success</b>";
			}
			else{
				mysql_query("ROLLBACK"); 
				echo "Failed";
			}
		}
		if($db_type==2 || $db_type==1 )
		{
			if($up_mst){
				oci_commit($con);
				echo "<b>Success</b>"; 
			}
			else{
				oci_rollback($con); 
				echo "<b>Failed</b>";
			}
		}
echo "<pre>";
echo "Total Load row =".count($load_dia_width_array);
 echo "<pre>";
echo "Total Load Dyeing Batch No=".$m;
echo "<pre>";
//print_r($load_dyeing_compamy_array);
//After run Complete; Plz stop this page- use die top of page;
?>